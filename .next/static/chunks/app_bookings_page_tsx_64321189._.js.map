{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/karan/sengarbus/app/bookings/page.tsx"],"sourcesContent":["\"use client\";\nimport { useUser } from \"@clerk/nextjs\";\nimport React, { useEffect, useState } from \"react\";\n\n// Define TypeScript interfaces for API response\ninterface Booking {\n  bookingId: number;\n  userId: number;\n  travelDate: string;\n  paymentStatus: string;\n  busDetails: {\n    busId: number;\n    name: string;\n    type: string;\n  };\n  routeDetails: {\n    routeId: number;\n    startLocation: string;\n    endLocation: string;\n  };\n  seatDetails: { seatNumber: string; seatType: string }[];\n}\n\nconst Page = () => {\n  const { isSignedIn } = useUser();\n  const [bookingHistory, setBookingHistory] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [username, setUsername] = useState(\"\");\n\n  useEffect(() => {\n    if (isSignedIn) {\n      const fetchBookingHistory = async () => {\n        try {\n          const API_URL = process.env.NEXT_PUBLIC_API_URL;\n          const response = await fetch(\n            `${API_URL}/api/booking-history`,\n            {\n              method: \"GET\",\n              credentials: \"include\",\n            }\n          );\n\n          const data = await response.json();\n          console.log(\"API Response:\", data); // Debugging: Print the entire response\n\n          setUsername(data.firstName);\n          setBookingHistory(data.bookingHistory || []);\n        } catch (error) {\n          console.log(\"Unable to fetch bookings\", error);\n        } finally {\n          setLoading(false);\n        }\n      };\n\n      fetchBookingHistory();\n    }\n  }, [isSignedIn]);\n\n  return (\n    <div>\n      {loading ? (\n        <div className=\"py-6 text-lg\">Fetching your booking history...</div>\n      ) : (\n        <div>\n          <div className=\"text-center py-4\">\n            <div className=\"text-xl md:text-3xl font-semibold\">\n              Hello {username}!\n            </div>\n            <div className=\"text-lg md:text-xl\">\n              Here is all your bookings...\n            </div>\n          </div>\n          <ul className=\"space-y-4 w-[90vw]\">\n            {bookingHistory.map((booking) => (\n              <li\n                key={booking.bookingId}\n                className=\"shadow-md rounded p-4 border\"\n              >\n                <h2 className=\"text-lg font-semibold mb-2\">\n                  Booking ID: {booking.bookingId}\n                </h2>\n                <div className=\"flex flex-col md:flex-row md:gap-4\">\n                  <p className=\"text-sm md:text-lg text-gray-300\">\n                    Status:{\" \"}\n                    <span\n                      className={\n                        booking.paymentStatus === \"success\"\n                          ? \"text-green-500\"\n                          : \"text-red-500\"\n                      }\n                    >\n                      {booking.paymentStatus === \"success\"\n                        ? \"Success\"\n                        : \"Pending Payment\"}\n                    </span>\n                  </p>\n                  <p className=\"text-sm md:text-lg text-gray-300\">\n                    Travel Date: {booking.travelDate}\n                  </p>\n                  <p className=\"text-sm md:text-lg text-gray-300\">\n                    Route: {booking.routeDetails.startLocation} â†’{\" \"}\n                    {booking.routeDetails.endLocation}\n                  </p>\n                  <p className=\"text-sm md:text-lg text-gray-300\">\n                    Bus: {booking.busDetails.name} ({booking.busDetails.type})\n                  </p>\n                  <p className=\"text-sm md:text-lg text-gray-300\">\n                    Seats:{\" \"}\n                    {booking.seatDetails.map((seat, index) => (\n                      <span key={index} className=\"mr-2\">\n                        {seat.seatNumber}{\" \"}\n                        <span className=\"text-neutral-400\">\n                          ({seat.seatType})\n                        </span>\n                        {index !== booking.seatDetails.length - 1 && \", \"}{\" \"}\n                      </span>\n                    ))}\n                  </p>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Page;\n"],"names":[],"mappings":";;;AAiC0B;;AAhC1B;AACA;;;AAFA;;;AAuBA,MAAM,OAAO;;IACX,MAAM,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;IAC7B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,IAAI,YAAY;gBACd,MAAM;0DAAsB;wBAC1B,IAAI;4BACF,MAAM;4BACN,MAAM,WAAW,MAAM,MACrB,GAAG,QAAQ,oBAAoB,CAAC,EAChC;gCACE,QAAQ;gCACR,aAAa;4BACf;4BAGF,MAAM,OAAO,MAAM,SAAS,IAAI;4BAChC,QAAQ,GAAG,CAAC,iBAAiB,OAAO,uCAAuC;4BAE3E,YAAY,KAAK,SAAS;4BAC1B,kBAAkB,KAAK,cAAc,IAAI,EAAE;wBAC7C,EAAE,OAAO,OAAO;4BACd,QAAQ,GAAG,CAAC,4BAA4B;wBAC1C,SAAU;4BACR,WAAW;wBACb;oBACF;;gBAEA;YACF;QACF;yBAAG;QAAC;KAAW;IAEf,qBACE,6LAAC;kBACE,wBACC,6LAAC;YAAI,WAAU;sBAAe;;;;;iCAE9B,6LAAC;;8BACC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;gCAAoC;gCAC1C;gCAAS;;;;;;;sCAElB,6LAAC;4BAAI,WAAU;sCAAqB;;;;;;;;;;;;8BAItC,6LAAC;oBAAG,WAAU;8BACX,eAAe,GAAG,CAAC,CAAC,wBACnB,6LAAC;4BAEC,WAAU;;8CAEV,6LAAC;oCAAG,WAAU;;wCAA6B;wCAC5B,QAAQ,SAAS;;;;;;;8CAEhC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;;gDAAmC;gDACtC;8DACR,6LAAC;oDACC,WACE,QAAQ,aAAa,KAAK,YACtB,mBACA;8DAGL,QAAQ,aAAa,KAAK,YACvB,YACA;;;;;;;;;;;;sDAGR,6LAAC;4CAAE,WAAU;;gDAAmC;gDAChC,QAAQ,UAAU;;;;;;;sDAElC,6LAAC;4CAAE,WAAU;;gDAAmC;gDACtC,QAAQ,YAAY,CAAC,aAAa;gDAAC;gDAAG;gDAC7C,QAAQ,YAAY,CAAC,WAAW;;;;;;;sDAEnC,6LAAC;4CAAE,WAAU;;gDAAmC;gDACxC,QAAQ,UAAU,CAAC,IAAI;gDAAC;gDAAG,QAAQ,UAAU,CAAC,IAAI;gDAAC;;;;;;;sDAE3D,6LAAC;4CAAE,WAAU;;gDAAmC;gDACvC;gDACN,QAAQ,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC9B,6LAAC;wDAAiB,WAAU;;4DACzB,KAAK,UAAU;4DAAE;0EAClB,6LAAC;gEAAK,WAAU;;oEAAmB;oEAC/B,KAAK,QAAQ;oEAAC;;;;;;;4DAEjB,UAAU,QAAQ,WAAW,CAAC,MAAM,GAAG,KAAK;4DAAM;;uDAL1C;;;;;;;;;;;;;;;;;;2BAlCZ,QAAQ,SAAS;;;;;;;;;;;;;;;;;;;;;AAmDtC;GAvGM;;QACmB,+JAAA,CAAA,UAAO;;;KAD1B;uCAyGS","debugId":null}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}