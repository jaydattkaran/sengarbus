(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{389:(e,s,t)=>{Promise.resolve().then(t.bind(t,12749))},12749:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(95155),l=t(45354),n=t(19173),c=t(12115);let i=()=>{let{isSignedIn:e}=(0,l.Jd)(),{getToken:s}=(0,n.d)(),[t,i]=(0,c.useState)([]),[r,o]=(0,c.useState)(!0),[d,x]=(0,c.useState)("");return(0,c.useEffect)(()=>{e&&(async()=>{try{let e=await s(),t=await fetch("".concat("https://sengarbus.onrender.com","/api/booking-history"),{method:"GET",credentials:"include",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),a=await t.json();console.log("API Response:",a),x(a.firstName),i(a.bookingHistory||[])}catch(e){console.log("Unable to fetch bookings",e)}finally{o(!1)}})()},[e]),(0,a.jsx)("div",{children:r?(0,a.jsx)("div",{className:"py-6 text-lg",children:"Fetching your booking history..."}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsxs)("div",{className:"text-xl md:text-3xl font-semibold",children:["Hello ",d,"!"]}),(0,a.jsx)("div",{className:"text-lg md:text-xl",children:"Here is all your bookings..."})]}),(0,a.jsx)("ul",{className:"space-y-4 w-[90vw]",children:t.map(e=>(0,a.jsxs)("li",{className:"shadow-md rounded p-4 border",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:["Booking ID: ",e.bookingId]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-4",children:[(0,a.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Status:"," ",(0,a.jsx)("span",{className:"success"===e.paymentStatus?"text-green-500":"text-red-500",children:"success"===e.paymentStatus?"Success":"Pending Payment"})]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Travel Date: ",e.travelDate]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Route: ",e.routeDetails.startLocation," â†’"," ",e.routeDetails.endLocation]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Bus: ",e.busDetails.name," (",e.busDetails.type,")"]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Seats:"," ",e.seatDetails.map((s,t)=>(0,a.jsxs)("span",{className:"mr-2",children:[s.seatNumber," ",(0,a.jsxs)("span",{className:"text-neutral-400",children:["(",s.seatType,")"]}),t!==e.seatDetails.length-1&&", "," "]},t))]})]})]},e.bookingId))})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[173,441,587,358],()=>s(389)),_N_E=e.O()}]);