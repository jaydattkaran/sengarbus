(()=>{var e={};e.id=407,e.ids=[407],e.modules={1471:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/karan/sengarbus/app/bookings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/karan/sengarbus/app/bookings/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25773:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>d});var r=s(70260),a=s(28203),n=s(25155),o=s.n(n),i=s(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d={children:["",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1471)),"/home/karan/sengarbus/app/bookings/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,638)),"/home/karan/sengarbus/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,84717)),"/home/karan/sengarbus/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,88772)),"/home/karan/sengarbus/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/home/karan/sengarbus/app/bookings/page.tsx"],c={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/bookings/page",pathname:"/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},61163:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(45512),a=s(76245),n=s(58009);let o=()=>{let{isSignedIn:e}=(0,a.Jd)(),[t,s]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0),[l,d]=(0,n.useState)("");return(0,n.useEffect)(()=>{e&&(async()=>{try{let e=await fetch("http://localhost:5000/api/booking-history",{method:"GET",credentials:"include"}),t=await e.json();console.log("API Response:",t),d(t.firstName),s(t.bookingHistory||[])}catch(e){console.log("Unable to fetch bookings",e)}finally{i(!1)}})()},[e]),(0,r.jsx)("div",{children:o?(0,r.jsx)("div",{className:"py-6 text-lg",children:"Fetching your booking history..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsxs)("div",{className:"text-xl md:text-3xl font-semibold",children:["Hello ",l,"!"]}),(0,r.jsx)("div",{className:"text-lg md:text-xl",children:"Here is all your bookings..."})]}),(0,r.jsx)("ul",{className:"space-y-4 w-[90vw]",children:t.map(e=>(0,r.jsxs)("li",{className:"shadow-md rounded p-4 border",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:["Booking ID: ",e.bookingId]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-4",children:[(0,r.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Status:"," ",(0,r.jsx)("span",{className:"success"===e.paymentStatus?"text-green-500":"text-red-500",children:"success"===e.paymentStatus?"Success":"Pending Payment"})]}),(0,r.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Travel Date: ",e.travelDate]}),(0,r.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Route: ",e.routeDetails.startLocation," â†’"," ",e.routeDetails.endLocation]}),(0,r.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Bus: ",e.busDetails.name," (",e.busDetails.type,")"]}),(0,r.jsxs)("p",{className:"text-sm md:text-lg text-gray-300",children:["Seats:"," ",e.seatDetails.map((t,s)=>(0,r.jsxs)("span",{className:"mr-2",children:[t.seatNumber," ",(0,r.jsxs)("span",{className:"text-neutral-400",children:["(",t.seatType,")"]}),s!==e.seatDetails.length-1&&", "," "]},s))]})]})]},e.bookingId))})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64419:(e,t,s)=>{Promise.resolve().then(s.bind(s,1471))},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78491:(e,t,s)=>{Promise.resolve().then(s.bind(s,61163))},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[680,87,48],()=>s(25773));module.exports=r})();